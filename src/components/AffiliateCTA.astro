---
/**
 * Reusable Affiliate CTA Component
 * Multiple style variants for different placements
 */

interface Props {
  variant?: 'primary' | 'sidebar' | 'pricing' | 'secondary' | 'dark';
  url: string;
  text?: string;
  subtext?: string;
  toolName?: string; // For gtag tracking
}

const { variant = 'primary', url, text = 'Try Free Now', subtext, toolName = 'unknown' } = Astro.props;

const variants = {
  primary: 'bg-[#F5521A] text-white shadow-[0_6px_0_0_rgba(0,0,0,0.2)] border-b-4 border-[#D44A1A]',
  sidebar: 'bg-[#F5521A] text-white shadow-[0_4px_0_0_rgba(0,0,0,0.2)] border-b-4 border-[#D44A1A]',
  pricing: 'bg-[#F5521A] text-white shadow-[0_4px_0_0_rgba(245,82,26,0.3)] border-b-4 border-[#D44A1A]',
  secondary: 'border-[3px] border-[#F5521A] text-[#F5521A] hover:bg-[#F5521A] hover:text-white',
  dark: 'bg-[#F5521A] text-white shadow-[0_6px_0_0_rgba(0,0,0,0.3)] border-b-4 border-[#D44A1A]'
};

const styles = variants[variant];
---

{variant === 'sidebar' && (
  <div class="bg-[#F5521A] p-5 border-[3px] border-[#D44A1A] relative overflow-hidden shadow-[0_4px_0_0_rgba(0,0,0,0.2)]">
    <div class="absolute top-0 right-0 w-20 h-20 bg-white/10 -mr-10 -mt-10 rounded-full"></div>
    <p class="text-xs font-black text-white/80 uppercase tracking-wider mb-2">Start Building Free</p>
    <a href={url} target="_blank" rel="noopener noreferrer" class="block w-full text-center px-4 py-3 bg-white text-[#F5521A] font-black text-sm hover:bg-gray-100 transition-colors border-b-4 border-gray-300" data-tool-name={toolName} data-location="sidebar" onclick={`gtag('event', 'affiliate_click', {tool_name: '${toolName}', location: 'sidebar'});`}>
      Try Now →
    </a>
    {subtext && <p class="text-xs text-white/60 text-center mt-2">{subtext}</p>}
  </div>
)}

{variant === 'dark' && (
  <div class="bg-gray-900 p-8 text-center my-12 relative overflow-hidden">
    <div class="absolute top-0 right-0 w-32 h-32 bg-[#F5521A]/10 -mr-16 -mt-16 rounded-full"></div>
    <h3 class="text-2xl font-black text-white mb-2">Still not sure?</h3>
    <p class="text-gray-400 mb-6 max-w-xl mx-auto">Try it free for 14 days. No credit card required. See if it's worth it.</p>
    <a href={url} target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-8 py-4 bg-[#F5521A] text-white font-black text-lg shadow-[0_6px_0_0_rgba(0,0,0,0.3)] hover:shadow-[0_8px_0_0_rgba(0,0,0,0.4)] active:shadow-[0_2px_0_0_rgba(0,0,0,0.2)] transition-shadow border-b-4 border-[#D44A1A]">
      <span>Start Your Free Trial</span>
      <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
        <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
      </svg>
    </a>
  </div>
)}

{variant === 'pricing' && (
  <a href={url} target="_blank" rel="noopener noreferrer" class="block w-full text-center px-4 py-3 bg-[#F5521A] text-white font-black text-sm shadow-[0_4px_0_0_rgba(245,82,26,0.3)] hover:shadow-[0_6px_0_0_rgba(245,82,26,0.4)] active:shadow-[0_2px_0_0_rgba(245,82,26,0.3)] transition-all border-b-4 border-[#D44A1A]" data-tool-name={toolName} data-location="pricing" onclick={`gtag('event', 'affiliate_click', {tool_name: '${toolName}', location: 'pricing'});`}>
    {text} →
  </a>
)}

{(variant === 'primary' || variant === 'secondary') && (
  <a href={url} target="_blank" rel="noopener noreferrer" class={`inline-flex items-center gap-2 px-8 py-4 font-black transition-all ${styles}`} data-tool-name={toolName} data-location={variant} onclick={`gtag('event', 'affiliate_click', {tool_name: '${toolName}', location: '${variant}'});`}>
    <span>{text}</span>
    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
      <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
    </svg>
  </a>
)}
